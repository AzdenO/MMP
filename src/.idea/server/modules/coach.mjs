
export default class Coach{

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    constructor(reasoner,service) {
        this.reasoner = reasoner;//gemini api wrapper class/object
        this.userservice = service;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    async get_suggestions_by_activity(activity_id,character) {
        this.reasoner.act_build(activity_id, this.#parseUserItems(), character);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    /*
    * PARSE USER ITEMS FOR USE IN GEMINI
    * Private class method for taking the necessary parts for every item (so excluding hashid, instanceid, etc.) to be used
    * in a prestructured prompt
    */
    #parseUserItems(){
        var parsed = "";

        for(const item in this.items){
            if(this.items[item].item_type==="Subclass"){//subclass compatibility not currently implemented
                continue;
            }
            var parseditem = this.items[item];
            delete parseditem.instance;
            delete parseditem.itemId;
            if(this.items[item].perks.length == 0){
                delete parseditem.perks;
            }
            parsed+=JSON.stringify(parseditem,null, 4);
        }
        return parsed;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getDisplayName(){
        return this.details.displayname;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getCharacters(){
        return this.details.characters;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getRefreshToken(){
        return this.details.refreshToken;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getAccessToken(){
        return this.details.accessToken;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getRefreshExpiry(){
        return this.details.refresh_expiry;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getMemberType(){
        return this.details.membertype;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getMembershipId(){
        return this.details.membershipid;
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    getCharacterIds(){
        return this.details.characters.characters[0][0];
    }
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}